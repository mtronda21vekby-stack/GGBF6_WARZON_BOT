<!-- app/webapp/static/index.html -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light">
  <title>BLACK CROWN OPS ‚Äî Mini App</title>

  <!-- ‚úÖ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è Telegram iOS: —Ñ–∏–∫—Å–∏—Ä—É–µ–º –±–∞–∑—É -->
  <base href="/webapp/">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- ‚úÖ build –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ JS -->
  <script>window.__BCO_BUILD__="__BUILD__";</script>

  <!-- ‚úÖ BOOTSTRAP cache-bust: –µ—Å–ª–∏ __BUILD__ –Ω–µ –ø–æ–¥–º–µ–Ω–∏–ª–∏, —Å—Ç–∞–≤–∏–º Date.now() -->
  <script>
    (function () {
      var build = (window.__BCO_BUILD__ && window.__BCO_BUILD__ !== "__BUILD__") ? window.__BCO_BUILD__ : String(Date.now());
      window.__BCO_BUILD__ = build;

      var css = document.createElement("link");
      css.rel = "stylesheet";
      css.href = "/webapp/style.css?build=" + encodeURIComponent(build);
      document.head.appendChild(css);
    })();
  </script>
</head>

<body>
  <!-- ‚úÖ —Ñ–æ–Ω –æ—Å—Ç–∞–≤–ª—è–µ–º (–ù–ï —Ä–µ–∂–µ–º) -->
  <div class="bg">
    <div class="stars"></div>
    <div class="nebula"></div>
    <div class="gridfx"></div>
  </div>

  <!-- ‚úÖ COMPAT: –¥–æ–±–∞–≤–∏–ª–∏ app-header, –Ω–æ –ù–ï —É–±–∏—Ä–∞–µ–º top -->
  <header class="top app-header">
    <div class="brand">
      <div class="logo">üëë</div>
      <div class="brand-text">
        <div class="title brand-title">BLACK CROWN OPS</div>
        <div class="sub brand-sub">premium ‚Ä¢ FPS coach</div>
      </div>
    </div>

    <!-- ‚úÖ COMPAT: chips-row + chips -->
    <div class="chip-row chips">
      <button class="chip" id="chipVoice" type="button">ü§ù –¢–∏–º–º–µ–π—Ç</button>
      <button class="chip" id="chipMode" type="button">üß† Normal</button>
      <button class="chip" id="chipPlatform" type="button">üñ• PC</button>
    </div>
  </header>

  <!-- ‚úÖ (–ù–ï –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) —Å–ª–æ—Ç –ø–æ–¥ top-tabs, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å. –°–µ–π—á–∞—Å —Å–∫—Ä—ã—Ç, –Ω–æ –Ω–µ –º–µ—à–∞–µ—Ç -->
  <div class="top-tabs" style="display:none;"></div>

  <!-- ‚úÖ COMPAT: –¥–æ–±–∞–≤–∏–ª–∏ app-main, –Ω–æ –ù–ï —É–±–∏—Ä–∞–µ–º wrap -->
  <main class="wrap app-main">
    <section class="hero card">
      <div class="hero-left">
        <div class="hero-kicker">–¢–≤–æ–π —à—Ç–∞–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
        <div class="hero-title">–î–æ–º–∏–Ω–∏—Ä—É–π. –£—á–∏—Å—å. –í—ã–∏–≥—Ä—ã–≤–∞–π.</div>
        <div class="hero-desc">
          Mini App = —á–∞—Ç + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º + –º–∏–Ω–∏-–∏–≥—Ä—ã.<br/>
          –í—Å—ë –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–æ—Ç–∞ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π. üòà
        </div>
        <div class="hero-actions">
          <button class="btn ghost" id="btnShare" type="button">üì§ Share</button>
          <button class="btn ghost" id="btnClose" type="button">‚úñ Close</button>
        </div>
      </div>

      <div class="hero-right">
        <div class="stat">
          <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
          <div class="stat-value" id="statOnline">ONLINE</div>
        </div>
        <div class="stat">
          <div class="stat-label">–°–µ—Å—Å–∏—è</div>
          <div class="stat-value" id="statSession">SYNC</div>
        </div>

        <div class="premium cardlite">
          <div class="premium-title">üíé Premium</div>
          <div class="premium-desc">–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (Invoice). Mini App –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–º–∞–Ω–¥—É.</div>
          <div class="actions">
            <button class="btn primary" id="btnBuyMonth" type="button">–ö—É–ø–∏—Ç—å ‚Ä¢ Month</button>
            <button class="btn" id="btnBuyLife" type="button">–ö—É–ø–∏—Ç—å ‚Ä¢ Lifetime</button>
          </div>
        </div>
      </div>
    </section>

    <!-- HOME -->
    <section class="grid tabpane active" id="tab-home">
      <div class="card">
        <div class="card-title">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
        <div class="actions">
          <button class="btn primary" id="btnOpenBot" type="button">–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –±–æ—Ç–∞</button>
          <button class="btn" id="btnSync" type="button">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
          <button class="btn" id="btnPremium" type="button">Premium Hub</button>
        </div>
        <div class="hint">
          –°–æ–≤–µ—Ç: –≤—ã–±–∏—Ä–∞–π –ø—Ä–æ—Ñ–∏–ª—å —Å–≤–µ—Ä—Ö—É (Voice/Mode/Platform), –∏ —á–∞—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ–¥ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
        </div>
      </div>

      <!-- ‚úÖ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç -->
      <div class="chat-shell">
        <div class="chat-head">
          <div class="left">
            <div class="chat-badge">üòà</div>
            <div>
              <div class="chat-title">–ß–∞—Ç —Å –º–æ–∑–≥–æ–º</div>
              <div class="chat-sub" id="chatSub">TEAMMATE ‚Ä¢ Normal ‚Ä¢ PC</div>
            </div>
          </div>
          <div class="right">
            <button class="chat-mini" id="btnChatClear" type="button">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="chat-mini" id="btnChatExport" type="button">üìã Copy</button>
          </div>
        </div>

        <div class="chat-log" id="chatLog" aria-label="Chat log"></div>

        <div class="chat-compose">
          <textarea id="chatInput" class="input" rows="2"
            placeholder="–ù–∞–ø–∏—à–∏: –∏–≥—Ä–∞ | input | –≥–¥–µ —É–º–∏—Ä–∞–µ—à—å | —Ü–µ–ª—å"></textarea>
          <button class="chat-send" id="btnChatSend" type="button">‚û§</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üéÆ –ò–≥—Ä–∞</div>
        <div class="seg" id="segGame">
          <button class="seg-btn active" data-value="Warzone" type="button">üî• Warzone</button>
          <button class="seg-btn" data-value="BO7" type="button">üí£ BO7</button>
          <button class="seg-btn" data-value="BF6" type="button">ü™ñ BF6</button>
        </div>
        <div class="mini-row">
          <div class="pill" id="pillRole">üé≠ Role: Flex</div>
          <div class="pill" id="pillBf6">üü© Class: Assault</div>
        </div>
      </div>

      <!-- ‚úÖ MINI GAMES HUB -->
      <div class="card">
        <div class="card-title">üéÆ Mini Games (2 —Ä–µ–∂–∏–º–∞)</div>
        <div class="hint">
          Aim Trial = –∞—Ä–∫–∞–¥–∞ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å. Zombies = Arcade / Roguelike.
          –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –±–æ—Ç–∞ (action=game_result).
        </div>

        <div class="grid" style="margin-top:10px;">
          <div class="cardlite">
            <div class="card-title">üéØ Aim Trial (ARCADE)</div>
            <div class="hint">20 —Å–µ–∫—É–Ω–¥. –¢–∞–ø –ø–æ —Ü–µ–ª–∏ = hit. –¢–∞–ø –º–∏–º–æ = miss.</div>
            <div class="game-arena aim-arena" id="aimArena" aria-label="Aim arena">
              <button class="aim-target" id="aimTarget" type="button" aria-label="Aim target"></button>
            </div>
            <div class="game-stat mono aim-stat" id="aimStat">üéØ 0/0 ‚Ä¢ Acc 0%</div>
            <div class="actions" style="margin-top:10px;">
              <button class="btn primary" id="btnAimStart" type="button">Start</button>
              <button class="btn" id="btnAimStop" type="button">Stop</button>
              <button class="btn" id="btnAimSend" type="button">Send result ‚Üí bot</button>
            </div>
          </div>

          <div class="cardlite">
            <div class="card-title">üßü Zombies Survival (ARCADE / ROGUELIKE)</div>
            <div class="seg" style="margin:8px 0;">
              <button class="seg-btn active" id="btnZModeArcade" type="button">üí• Arcade</button>
              <button class="seg-btn" id="btnZModeRogue" type="button">üòà Roguelike</button>
            </div>

            <!-- ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—É—é –∞—Ä–µ–Ω—É (–ù–ï —Ä–µ–∂–µ–º) -->
            <div class="z-arena" id="zArena" aria-label="Zombies arena">
              <button class="zombie" id="z1" type="button">üßü</button>
              <button class="zombie" id="z2" type="button">üßü</button>
              <button class="zombie" id="z3" type="button">üßü</button>
            </div>

            <div class="game-stat mono" id="zStat">üéÆ ARCADE ‚Ä¢ üßü Wave 1 ‚Ä¢ ‚ò†Ô∏è 0 ‚Ä¢ üí∞ 0 ‚Ä¢ ‚ù§Ô∏è 100 ‚Ä¢ üî´ SMG</div>

            <div class="actions" style="margin-top:10px;">
              <button class="btn primary" id="btnZGameStart" type="button">Start run</button>
              <button class="btn" id="btnZGameStop" type="button">Stop</button>
              <button class="btn" id="btnZGameSend" type="button">Send result ‚Üí bot</button>
            </div>

            <div class="card-sub">Shop (—Ç–æ–ª—å–∫–æ Roguelike)</div>
            <div class="actions">
              <button class="btn" id="btnZBuyJug" type="button">üß™ Jug (12)</button>
              <button class="btn" id="btnZBuySpeed" type="button">‚ö° Speed (10)</button>
              <button class="btn" id="btnZBuyAmmo" type="button">üî´ Ammo (8)</button>
            </div>

            <div class="hint">–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Ç–∞–ø –≤ –ø—É—Å—Ç–æ—Ç—É –∞—Ä–µ–Ω—ã = ‚Äú–ø—Ä–æ–º–∞—Ö‚Äù (HP –≤–Ω–∏–∑). –¢–∞–ø –ø–æ üßü = kill.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- COACH -->
    <section class="grid tabpane" id="tab-coach">
      <div class="card">
        <div class="card-title">üéØ –ü–ª–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (20 –º–∏–Ω—É—Ç)</div>
        <div class="list">
          <div class="li"><span class="dot"></span>5 –º–∏–Ω ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å (—Ä–∞–∑–º–∏–Ω–∫–∞)</div>
          <div class="li"><span class="dot"></span>10 –º–∏–Ω ‚Äî —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ (–∞–∏–º/–º—É–≤–º–µ–Ω—Ç/–ø–æ–∑–∏—Ü–∏–æ–Ω–∫–∞)</div>
          <div class="li"><span class="dot"></span>5 –º–∏–Ω ‚Äî –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –≤ –±–æ—é</div>
        </div>

        <div class="card-sub">–í—ã–±–µ—Ä–∏ —Ñ–æ–∫—É—Å</div>
        <div class="seg" id="segFocus">
          <button class="seg-btn active" data-value="aim" type="button">üéØ Aim</button>
          <button class="seg-btn" data-value="movement" type="button">üß† –ú—É–≤–º–µ–Ω—Ç</button>
          <button class="seg-btn" data-value="position" type="button">üó∫ –ü–æ–∑–∏—Ü–∏–æ–Ω–∫–∞</button>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnSendPlan" type="button">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –≤ –±–æ—Ç–µ</button>
          <button class="btn" id="btnOpenTraining" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚ÄúüéØ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞‚Äù</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üòà –†–µ–∂–∏–º –º—ã—à–ª–µ–Ω–∏—è</div>
        <div class="seg" id="segMode">
          <button class="seg-btn active" data-value="Normal" type="button">üß† Normal</button>
          <button class="seg-btn" data-value="Pro" type="button">üî• Pro</button>
          <button class="seg-btn" data-value="Demon" type="button">üòà Demon</button>
        </div>
        <div class="hint">–ú–µ–Ω—è–µ—Ç —Å—Ç–∏–ª—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (TEAMMATE ‚Äî –¥–µ—Ñ–æ–ª—Ç, COACH ‚Äî —ç–ª–∏—Ç–∞).</div>
      </div>
    </section>

    <!-- VOD -->
    <section class="grid tabpane" id="tab-vod">
      <div class="card">
        <div class="card-title">üé¨ VOD: —Ä–∞–∑–±–æ—Ä –±–µ–∑ –≤–∏–¥–µ–æ</div>
        <div class="hint">–ö–∏–Ω—å 3 —Ç–∞–π–º–∫–æ–¥–∞ –∏ —á—Ç–æ —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å ‚Äî –±–æ—Ç —Ä–∞–∑–±–µ—Ä—ë—Ç —Ä–µ—à–µ–Ω–∏—è.</div>
        <div class="grid2">
          <input class="input" id="vod1" placeholder="00:12" />
          <input class="input" id="vod2" placeholder="01:40" />
          <input class="input" id="vod3" placeholder="03:05" />
        </div>
        <textarea class="input" id="vodNote" rows="3" placeholder="–ß—Ç–æ —Ç—ã —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å / –∫–∞–∫–æ–π –±—ã–ª –ø–ª–∞–Ω"></textarea>
        <div class="actions">
          <button class="btn primary" id="btnSendVod" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –±–æ—Ç–∞</button>
          <button class="btn" id="btnOpenVod" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚Äúüé¨ VOD‚Äù</button>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="grid tabpane" id="tab-settings">
      <div class="card">
        <div class="card-title">‚öôÔ∏è –ü—Ä–æ—Ñ–∏–ª—å</div>

        <div class="grid2">
          <div class="field">
            <div class="label">Platform</div>
            <div class="seg" id="segPlatform">
              <button class="seg-btn active" data-value="PC" type="button">üñ• PC</button>
              <button class="seg-btn" data-value="PlayStation" type="button">üéÆ PS</button>
              <button class="seg-btn" data-value="Xbox" type="button">üéÆ Xbox</button>
            </div>
          </div>

          <div class="field">
            <div class="label">Input</div>
            <div class="seg" id="segInput">
              <button class="seg-btn" data-value="KBM" type="button">‚å®Ô∏è KBM</button>
              <button class="seg-btn active" data-value="Controller" type="button">üéÆ Controller</button>
            </div>
          </div>
        </div>

        <div class="field">
          <div class="label">Voice</div>
          <div class="seg" id="segVoice">
            <button class="seg-btn active" data-value="TEAMMATE" type="button">ü§ù –¢–∏–º–º–µ–π—Ç</button>
            <button class="seg-btn" data-value="COACH" type="button">üìö –ö–æ—É—á</button>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnApplyProfile" type="button">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn" id="btnOpenSettings" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚Äú‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏‚Äù</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üß† –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</div>
        <div class="list mono">
          <div class="li">user_id: <span id="dbgUser">‚Äî</span></div>
          <div class="li">chat: <span id="dbgChat">‚Äî</span></div>
          <div class="li">theme: <span id="dbgTheme">‚Äî</span></div>
          <div class="li">initData: <span id="dbgInit">‚Äî</span></div>
        </div>

        <div class="hint">–ï—Å–ª–∏ initData = empty ‚Äî —Ç—ã –æ—Ç–∫—Ä—ã–ª –Ω–µ –∏–∑ Telegram.</div>

        <div class="hint" id="buildTag" style="margin-top:8px; opacity:.85;">
          build: __BUILD__
        </div>

        <div class="hint" id="jsHealth"
             style="margin-top:6px; opacity:.85; color:rgba(255,255,255,.65);">
          js: loading‚Ä¶
        </div>
      </div>
    </section>

    <!-- ZOMBIES (bot menu) -->
    <section class="grid tabpane" id="tab-zombies">
      <div class="card">
        <div class="card-title">üßü Zombies: —à—Ç–∞–±</div>
        <div class="seg" id="segZMap">
          <button class="seg-btn active" data-value="Ashes" type="button">üßü Ashes</button>
          <button class="seg-btn" data-value="Astra" type="button">üßü Astra</button>
        </div>
        <div class="actions">
          <button class="btn primary" id="btnOpenZombies" type="button">–û—Ç–∫—Ä—ã—Ç—å Zombies –≤ –±–æ—Ç–µ</button>
          <button class="btn" id="btnZPerks" type="button">–ü–µ—Ä–∫–∏</button>
          <button class="btn" id="btnZLoadout" type="button">–û—Ä—É–∂–∏–µ</button>
          <button class="btn" id="btnZEggs" type="button">–ü–∞—Å—Ö–∞–ª–∫–∏</button>
          <button class="btn" id="btnZRound" type="button">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</button>
          <button class="btn" id="btnZTips" type="button">–°–æ–≤–µ—Ç—ã</button>
        </div>
        <div class="hint">–ï—Å–ª–∏ —Ä–∞–Ω—å—à–µ ‚Äú–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ‚Äù ‚Äî —ç—Ç–æ –±—ã–ª type=open. –°–µ–π—á–∞—Å type=nav ‚úÖ</div>
      </div>
    </section>

    <footer class="foot">
      <div class="foot-left">‚Äî BCO üòà</div>
      <div class="foot-right"></div>
    </footer>
  </main>

  <!-- ‚úÖ COMPAT: –¥–æ–±–∞–≤–∏–ª–∏ bottom-nav, –Ω–æ –ù–ï —É–±–∏—Ä–∞–µ–º bottombar -->
  <nav class="bottombar bottom-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <button class="nav-btn active" data-tab="home" type="button" aria-selected="true">
      <span class="nav-ico">‚≠ê</span><span class="nav-txt">–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    <button class="nav-btn" data-tab="coach" type="button" aria-selected="false">
      <span class="nav-ico">üéØ</span><span class="nav-txt">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
    </button>
    <button class="nav-btn" data-tab="vod" type="button" aria-selected="false">
      <span class="nav-ico">üé¨</span><span class="nav-txt">VOD</span>
    </button>
    <button class="nav-btn" data-tab="settings" type="button" aria-selected="false">
      <span class="nav-ico">‚öôÔ∏è</span><span class="nav-txt">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
    </button>
    <button class="nav-btn" data-tab="zombies" type="button" aria-selected="false">
      <span class="nav-ico">üßü</span><span class="nav-txt">Zombies</span>
    </button>
  </nav>

  <div class="toast" id="toast">OK</div>

  <!-- ‚úÖ Fullscreen overlay mount: JS –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/–≤–µ—à–∞—Ç—å —Å—é–¥–∞ –∏–≥—Ä—É -->
  <div id="zOverlayMount" aria-hidden="true"></div>

  <!-- ‚úÖ Telegram WebApp API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- ‚úÖ –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô LOADER: zombies.js -> (optional) zombies.assets.js -> app.js -->
  <script>
    (function () {
      var build = window.__BCO_BUILD__ || String(Date.now());

      function load(src) {
        return new Promise(function (resolve, reject) {
          var s = document.createElement("script");
          s.src = src + "?build=" + encodeURIComponent(build);
          s.async = false; // –≤–∞–∂–Ω–æ: –ø–æ—Ä—è–¥–æ–∫
          s.onload = resolve;
          s.onerror = reject;
          document.body.appendChild(s);
        });
      }

      // optional script: –µ—Å–ª–∏ assets —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî –Ω–µ –ø–∞–¥–∞–µ–º
      function loadOptional(src) {
        return new Promise(function (resolve) {
          var s = document.createElement("script");
          s.src = src + "?build=" + encodeURIComponent(build);
          s.async = false;
          s.onload = function(){ resolve(true); };
          s.onerror = function(){ resolve(false); };
          document.body.appendChild(s);
        });
      }

      load("/webapp/zombies.js")
        .then(function () { return loadOptional("/webapp/zombies.assets.js"); })
        .then(function () { return load("/webapp/app.js"); })
        .catch(function (e) {
          console.error("BCO boot load error:", e);
          var el = document.getElementById("jsHealth");
          if (el) el.textContent = "js: BOOT ERROR (check console)";
        });
    })();
  </script>

  <!-- ‚úÖ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä: js –ø–æ–¥—Ö–≤–∞—Ç–∏–ª—Å—è -->
  <script>
    (function () {
      var el = document.getElementById("jsHealth");
      if (!el) return;

      var tries = 0;
      var t = setInterval(function () {
        tries++;
        if (window.__BCO_JS_OK__ === true) {
          el.textContent = "js: OK";
          clearInterval(t);
          return;
        }
        if (tries >= 25) {
          el.textContent = "js: NOT LOADED (cache/route/path)";
          clearInterval(t);
        }
      }, 120);
    })();
  </script>
</body>
</html>
