<!-- app/webapp/static/index.html -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <!-- PREMIUM: anti-zoom + safe-area + stable scaling -->
  <meta
    name="viewport"
    content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no"
  />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#07070b" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="format-detection" content="telephone=no,date=no,address=no,email=no" />
  <meta name="mobile-web-app-capable" content="yes" />

  <title>BLACK CROWN OPS ‚Äî Mini App</title>

  <base href="/webapp/">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- build marker -->
  <script>window.__BCO_BUILD__="__BUILD__";</script>

  <!-- PREMIUM: disable pinch/double-tap zoom (iOS WebView hardening) -->
  <script>
    (function () {
      function prevent(e) { try { e.preventDefault(); } catch(_) {} }

      // gesture* fires on iOS for pinch
      window.addEventListener("gesturestart", prevent, { passive: false });
      window.addEventListener("gesturechange", prevent, { passive: false });
      window.addEventListener("gestureend", prevent, { passive: false });

      // Prevent pinch (multi-touch) + prevent double-tap zoom
      var lastTouchEnd = 0;
      window.addEventListener("touchstart", function (e) {
        if (e.touches && e.touches.length > 1) prevent(e);
      }, { passive: false });

      window.addEventListener("touchend", function (e) {
        var now = Date.now();
        if (now - lastTouchEnd <= 300) prevent(e); // double-tap zoom
        lastTouchEnd = now;
      }, { passive: false });

      // Desktop ctrl/cmd + wheel zoom
      window.addEventListener("wheel", function (e) {
        if (e.ctrlKey || e.metaKey) prevent(e);
      }, { passive: false });
    })();
  </script>

  <!-- CSS cache-bust loader -->
  <script>
    (function () {
      var build = (window.__BCO_BUILD__ && window.__BCO_BUILD__ !== "__BUILD__")
        ? window.__BCO_BUILD__
        : String(Date.now());
      window.__BCO_BUILD__ = build;

      var css = document.createElement("link");
      css.rel = "stylesheet";
      css.href = "/webapp/style.css?build=" + encodeURIComponent(build);
      document.head.appendChild(css);

      var nos = document.createElement("noscript");
      nos.innerHTML = '<link rel="stylesheet" href="/webapp/style.css?build=' + encodeURIComponent(build) + '">';
      document.head.appendChild(nos);
    })();
  </script>

  <!-- Telegram WebApp bootstrap: fullscreen/expand + colors -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    (function () {
      function safe(fn){ try{ fn(); }catch(_){ } }
      function initTG(){
        if (!window.Telegram || !Telegram.WebApp) return;
        var wa = Telegram.WebApp;

        safe(function(){ wa.ready(); });
        safe(function(){ wa.expand(); }); // best-effort "fullscreen" inside Telegram
        safe(function(){ wa.setHeaderColor && wa.setHeaderColor("#07070b"); });
        safe(function(){ wa.setBackgroundColor && wa.setBackgroundColor("#07070b"); });

        // Optional polish (safe-guards)
        safe(function(){ wa.enableClosingConfirmation && wa.enableClosingConfirmation(); });

        // Small iOS polish: keep webview responsive
        safe(function(){ wa.disableVerticalSwipes && wa.disableVerticalSwipes(); });
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initTG, { once: true });
      } else {
        initTG();
      }
    })();
  </script>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div class="stars"></div>
    <div class="nebula"></div>
    <div class="gridfx"></div>
  </div>

  <header class="top app-header" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">üëë</div>
      <div class="brand-text">
        <div class="title brand-title">BLACK CROWN OPS</div>
        <div class="sub brand-sub">premium ‚Ä¢ FPS coach</div>
      </div>
    </div>

    <div class="chip-row chips" role="group" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">
      <button class="chip" id="chipVoice" type="button">ü§ù –¢–∏–º–º–µ–π—Ç</button>
      <button class="chip" id="chipMode" type="button">üß† Normal</button>
      <button class="chip" id="chipPlatform" type="button">üñ• PC</button>
    </div>
  </header>

  <!-- –æ—Å—Ç–∞–≤–ª—è–µ–º, –Ω–æ —Å–µ–π—á–∞—Å —Å–∫—Ä—ã—Ç–æ (–±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ –ø–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) -->
  <div class="top-tabs" style="display:none;"></div>

  <main class="wrap app-main" role="main">
    <section class="hero card">
      <div class="hero-left">
        <div class="hero-kicker">–¢–≤–æ–π —à—Ç–∞–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
        <div class="hero-title">–î–æ–º–∏–Ω–∏—Ä—É–π. –£—á–∏—Å—å. –í—ã–∏–≥—Ä—ã–≤–∞–π.</div>
        <div class="hero-desc">
          Mini App = —á–∞—Ç + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º + –º–∏–Ω–∏-–∏–≥—Ä—ã.<br/>
          –í—Å—ë –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–æ—Ç–∞ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π. üòà
        </div>
        <div class="hero-actions">
          <button class="btn ghost" id="btnShare" type="button">üì§ Share</button>
          <button class="btn ghost" id="btnClose" type="button">‚úñ Close</button>
        </div>
      </div>

      <div class="hero-right">
        <div class="stat">
          <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
          <div class="stat-value" id="statOnline">ONLINE</div>
        </div>
        <div class="stat">
          <div class="stat-label">–°–µ—Å—Å–∏—è</div>
          <div class="stat-value" id="statSession">SYNC</div>
        </div>

        <div class="premium cardlite">
          <div class="premium-title">üíé Premium</div>
          <div class="premium-desc">–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (Invoice). Mini App –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–º–∞–Ω–¥—É.</div>
          <div class="actions">
            <button class="btn primary" id="btnBuyMonth" type="button">–ö—É–ø–∏—Ç—å ‚Ä¢ Month</button>
            <button class="btn" id="btnBuyLife" type="button">–ö—É–ø–∏—Ç—å ‚Ä¢ Lifetime</button>
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         HOME
    ========================== -->
    <section class="grid tabpane active" id="tab-home">
      <div class="card">
        <div class="card-title">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
        <div class="actions">
          <button class="btn primary" id="btnOpenBot" type="button">–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é –±–æ—Ç–∞</button>
          <button class="btn" id="btnSync" type="button">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
          <button class="btn" id="btnPremium" type="button">Premium Hub</button>

          <!-- NEW: –±—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥ –≤ –∏–≥—Ä—É (full takeover) -->
          <button class="btn primary" id="btnPlayZombies" type="button">üßü Play Zombies (Fullscreen)</button>
        </div>
        <div class="hint">
          –°–æ–≤–µ—Ç: –≤—ã–±–∏—Ä–∞–π –ø—Ä–æ—Ñ–∏–ª—å —Å–≤–µ—Ä—Ö—É (Voice/Mode/Platform), –∏ —á–∞—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ–¥ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
        </div>
      </div>

      <div class="chat-shell">
        <div class="chat-head">
          <div class="left">
            <div class="chat-badge">üòà</div>
            <div>
              <div class="chat-title">–ß–∞—Ç —Å –º–æ–∑–≥–æ–º</div>
              <div class="chat-sub" id="chatSub">TEAMMATE ‚Ä¢ Normal ‚Ä¢ PC</div>
            </div>
          </div>
          <div class="right">
            <button class="chat-mini" id="btnChatClear" type="button">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
            <button class="chat-mini" id="btnChatExport" type="button">üìã Copy</button>
          </div>
        </div>

        <div class="chat-log" id="chatLog" aria-label="Chat log"></div>

        <div class="chat-compose">
          <textarea id="chatInput" class="input" rows="2"
            placeholder="–ù–∞–ø–∏—à–∏: –∏–≥—Ä–∞ | input | –≥–¥–µ —É–º–∏—Ä–∞–µ—à—å | —Ü–µ–ª—å"></textarea>
          <button class="chat-send" id="btnChatSend" type="button" aria-label="Send">‚û§</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üéÆ –ò–≥—Ä–∞</div>
        <div class="seg" id="segGame">
          <button class="seg-btn active" data-value="Warzone" type="button">üî• Warzone</button>
          <button class="seg-btn" data-value="BO7" type="button">üí£ BO7</button>
          <button class="seg-btn" data-value="BF6" type="button">ü™ñ BF6</button>
        </div>
        <div class="mini-row">
          <div class="pill" id="pillRole">üé≠ Role: Flex</div>
          <div class="pill" id="pillBf6">üü© Class: Assault</div>
        </div>
      </div>

      <!-- –ù–ï –£–†–ï–ó–ê–ï–ú: mini-games –æ—Å—Ç–∞—é—Ç—Å—è, –Ω–æ Zombies –∑–¥–µ—Å—å = –≤–∏—Ç—Ä–∏–Ω–∞/—Ç—Ä–∏–≥–≥–µ—Ä—ã.
           –†–µ–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ —Ç–µ–ø–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ GAME (tab-game) + fullscreen takeover. -->
      <div class="card">
        <div class="card-title">üéÆ Mini Games (2 —Ä–µ–∂–∏–º–∞)</div>
        <div class="hint">
          Aim Trial = –∞—Ä–∫–∞–¥–∞ –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å. Zombies = Arcade / Roguelike.
          –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –±–æ—Ç–∞ (action=game_result).
        </div>

        <div class="grid" style="margin-top:10px;">
          <div class="cardlite">
            <div class="card-title">üéØ Aim Trial (ARCADE)</div>
            <div class="hint">20 —Å–µ–∫—É–Ω–¥. –¢–∞–ø –ø–æ —Ü–µ–ª–∏ = hit. –¢–∞–ø –º–∏–º–æ = miss.</div>
            <div class="game-arena aim-arena" id="aimArena" aria-label="Aim arena">
              <button class="aim-target" id="aimTarget" type="button" aria-label="Aim target"></button>
            </div>
            <div class="game-stat mono aim-stat" id="aimStat">üéØ 0/0 ‚Ä¢ Acc 0%</div>
            <div class="actions" style="margin-top:10px;">
              <button class="btn primary" id="btnAimStart" type="button">Start</button>
              <button class="btn" id="btnAimStop" type="button">Stop</button>
              <button class="btn" id="btnAimSend" type="button">Send result ‚Üí bot</button>
            </div>
          </div>

          <div class="cardlite">
            <div class="card-title">üßü Zombies Survival (Preview)</div>
            <div class="hint">
              –≠—Ç–æ –ø—Ä–µ–≤—å—é/–ø–∞–Ω–µ–ª—å. –†–µ–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ —Ç–µ–ø–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ <b>Game</b> –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ.
            </div>

            <div class="seg" style="margin:8px 0;">
              <button class="seg-btn active" id="btnZModeArcade" type="button">üí• Arcade</button>
              <button class="seg-btn" id="btnZModeRogue" type="button">üòà Roguelike</button>
            </div>

            <div class="actions" style="margin-top:10px;">
              <button class="btn primary" id="btnZQuickPlay" type="button">üßü Open Fullscreen Game</button>
              <button class="btn" id="btnZGameSend" type="button">Send result ‚Üí bot</button>
            </div>

            <div class="card-sub">Shop (–≤ –∏–≥—Ä–µ ‚Ä¢ Roguelike)</div>
            <div class="actions">
              <button class="btn" id="btnZBuyJug" type="button">üß™ Jug (12)</button>
              <button class="btn" id="btnZBuySpeed" type="button">‚ö° Speed (10)</button>
              <button class="btn" id="btnZBuyAmmo" type="button">üî´ Ammo (8)</button>
            </div>

            <div class="hint">
              –ö–Ω–æ–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞ —Ç—É—Ç ‚Äî –±—ã—Å—Ç—Ä—ã–µ —Ö–æ—Ç–∫–µ–∏. –ü–æ–ª–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω/upgrade/reroll/reload ‚Äî –≤–Ω—É—Ç—Ä–∏ Game fullscreen.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         COACH
    ========================== -->
    <section class="grid tabpane" id="tab-coach">
      <div class="card">
        <div class="card-title">üéØ –ü–ª–∞–Ω —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (20 –º–∏–Ω—É—Ç)</div>
        <div class="list">
          <div class="li"><span class="dot"></span>5 –º–∏–Ω ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å (—Ä–∞–∑–º–∏–Ω–∫–∞)</div>
          <div class="li"><span class="dot"></span>10 –º–∏–Ω ‚Äî —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ (–∞–∏–º/–º—É–≤–º–µ–Ω—Ç/–ø–æ–∑–∏—Ü–∏–æ–Ω–∫–∞)</div>
          <div class="li"><span class="dot"></span>5 –º–∏–Ω ‚Äî –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –≤ –±–æ—é</div>
        </div>

        <div class="card-sub">–í—ã–±–µ—Ä–∏ —Ñ–æ–∫—É—Å</div>
        <div class="seg" id="segFocus">
          <button class="seg-btn active" data-value="aim" type="button">üéØ Aim</button>
          <button class="seg-btn" data-value="movement" type="button">üß† –ú—É–≤–º–µ–Ω—Ç</button>
          <button class="seg-btn" data-value="position" type="button">üó∫ –ü–æ–∑–∏—Ü–∏–æ–Ω–∫–∞</button>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnSendPlan" type="button">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –≤ –±–æ—Ç–µ</button>
          <button class="btn" id="btnOpenTraining" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚ÄúüéØ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞‚Äù</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üòà –†–µ–∂–∏–º –º—ã—à–ª–µ–Ω–∏—è</div>
        <div class="seg" id="segMode">
          <button class="seg-btn active" data-value="Normal" type="button">üß† Normal</button>
          <button class="seg-btn" data-value="Pro" type="button">üî• Pro</button>
          <button class="seg-btn" data-value="Demon" type="button">üòà Demon</button>
        </div>
        <div class="hint">–ú–µ–Ω—è–µ—Ç —Å—Ç–∏–ª—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (TEAMMATE ‚Äî –¥–µ—Ñ–æ–ª—Ç, COACH ‚Äî —ç–ª–∏—Ç–∞).</div>
      </div>
    </section>

    <!-- =========================
         VOD
    ========================== -->
    <section class="grid tabpane" id="tab-vod">
      <div class="card">
        <div class="card-title">üé¨ VOD: —Ä–∞–∑–±–æ—Ä –±–µ–∑ –≤–∏–¥–µ–æ</div>
        <div class="hint">–ö–∏–Ω—å 3 —Ç–∞–π–º–∫–æ–¥–∞ –∏ —á—Ç–æ —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å ‚Äî –±–æ—Ç —Ä–∞–∑–±–µ—Ä—ë—Ç —Ä–µ—à–µ–Ω–∏—è.</div>
        <div class="grid2">
          <input class="input" id="vod1" placeholder="00:12" />
          <input class="input" id="vod2" placeholder="01:40" />
          <input class="input" id="vod3" placeholder="03:05" />
        </div>
        <textarea class="input" id="vodNote" rows="3" placeholder="–ß—Ç–æ —Ç—ã —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å / –∫–∞–∫–æ–π –±—ã–ª –ø–ª–∞–Ω"></textarea>
        <div class="actions">
          <button class="btn primary" id="btnSendVod" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –±–æ—Ç–∞</button>
          <button class="btn" id="btnOpenVod" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚Äúüé¨ VOD‚Äù</button>
        </div>
      </div>
    </section>

    <!-- =========================
         SETTINGS
    ========================== -->
    <section class="grid tabpane" id="tab-settings">
      <div class="card">
        <div class="card-title">‚öôÔ∏è –ü—Ä–æ—Ñ–∏–ª—å</div>

        <div class="grid2">
          <div class="field">
            <div class="label">Platform</div>
            <div class="seg" id="segPlatform">
              <button class="seg-btn active" data-value="PC" type="button">üñ• PC</button>
              <button class="seg-btn" data-value="PlayStation" type="button">üéÆ PS</button>
              <button class="seg-btn" data-value="Xbox" type="button">üéÆ Xbox</button>
            </div>
          </div>

          <div class="field">
            <div class="label">Input</div>
            <div class="seg" id="segInput">
              <button class="seg-btn" data-value="KBM" type="button">‚å®Ô∏è KBM</button>
              <button class="seg-btn active" data-value="Controller" type="button">üéÆ Controller</button>
            </div>
          </div>
        </div>

        <div class="field">
          <div class="label">Voice</div>
          <div class="seg" id="segVoice">
            <button class="seg-btn active" data-value="TEAMMATE" type="button">ü§ù –¢–∏–º–º–µ–π—Ç</button>
            <button class="seg-btn" data-value="COACH" type="button">üìö –ö–æ—É—á</button>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="btnApplyProfile" type="button">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn" id="btnOpenSettings" type="button">–û—Ç–∫—Ä—ã—Ç—å ‚Äú‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏‚Äù</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">üß† –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</div>
        <div class="list mono">
          <div class="li">user_id: <span id="dbgUser">‚Äî</span></div>
          <div class="li">chat: <span id="dbgChat">‚Äî</span></div>
          <div class="li">theme: <span id="dbgTheme">‚Äî</span></div>
          <div class="li">initData: <span id="dbgInit">‚Äî</span></div>
        </div>

        <div class="hint">–ï—Å–ª–∏ initData = empty ‚Äî —Ç—ã –æ—Ç–∫—Ä—ã–ª –Ω–µ –∏–∑ Telegram.</div>

        <div class="hint" id="buildTag" style="margin-top:8px; opacity:.85;">
          build: __BUILD__
        </div>

        <div class="hint" id="jsHealth"
             style="margin-top:6px; opacity:.85; color:rgba(255,255,255,.65);">
          js: loading‚Ä¶
        </div>
      </div>
    </section>

    <!-- =========================
         GAME (ZOMBIES FULLSCREEN)
    ========================== -->
    <section class="grid tabpane" id="tab-game">
      <div class="card">
        <div class="card-title">üßü Game: Zombies Survival</div>
        <div class="hint">
          –ó–¥–µ—Å—å ‚Äî –≤—Ö–æ–¥ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∏–≥—Ä—É. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ Mini App –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ <b>full takeover</b>:
          —Å–∫—Ä—ã–≤–∞–µ–º header/nav –∏ –æ—Ç–¥–∞—ë–º —ç–∫—Ä–∞–Ω –∏–≥—Ä–µ.
        </div>

        <div class="card-sub">–ö–∞—Ä—Ç–∞</div>
        <div class="seg" id="segZMap">
          <button class="seg-btn active" data-value="Ashes" type="button">üßü Ashes</button>
          <button class="seg-btn" data-value="Astra" type="button">üßü Astra</button>
        </div>

        <div class="card-sub">–†–µ–∂–∏–º</div>
        <div class="seg" style="margin-top:8px;">
          <button class="seg-btn active" id="btnZModeArcade2" type="button">üí• Arcade</button>
          <button class="seg-btn" id="btnZModeRogue2" type="button">üòà Roguelike</button>
        </div>

        <div class="actions" style="margin-top:10px;">
          <button class="btn primary" id="btnZEnterGame" type="button">‚ñ∂ Start Fullscreen</button>
          <button class="btn" id="btnZOpenHQ" type="button">üß† Zombies HQ (–±–æ—Ç/–≥–∞–π–¥—ã)</button>
          <button class="btn" id="btnZGameSend2" type="button">Send result ‚Üí bot</button>
        </div>

        <div class="hint">
          –ú–∞–≥–∞–∑–∏–Ω/upgrade/reroll/reload/–ø–µ—Ä–∫–∏/—Å–∫–∏–Ω—ã ‚Äî <b>–≤–Ω—É—Ç—Ä–∏ –∏–≥—Ä—ã</b> (full overlay).
          –≠—Ç–∞ –≤–∫–ª–∞–¥–∫–∞ ‚Äî ‚Äú–ª–∞—É–Ω—á–µ—Ä‚Äù, –∞ –Ω–µ –ø–∞–Ω–µ–ª—å —Å –º–µ–ª–∫–∏–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏.
        </div>
      </div>

      <div class="card">
        <div class="card-title">üßü Zombies: —à—Ç–∞–± (–∫–æ–º–∞–Ω–¥—ã –±–æ—Ç—É)</div>
        <div class="actions">
          <button class="btn primary" id="btnOpenZombies" type="button">–û—Ç–∫—Ä—ã—Ç—å Zombies –≤ –±–æ—Ç–µ</button>
          <button class="btn" id="btnZPerks" type="button">–ü–µ—Ä–∫–∏</button>
          <button class="btn" id="btnZLoadout" type="button">–û—Ä—É–∂–∏–µ</button>
          <button class="btn" id="btnZEggs" type="button">–ü–∞—Å—Ö–∞–ª–∫–∏</button>
          <button class="btn" id="btnZRound" type="button">–°—Ç—Ä–∞—Ç–µ–≥–∏—è</button>
          <button class="btn" id="btnZTips" type="button">–°–æ–≤–µ—Ç—ã</button>
        </div>
        <div class="hint">–ï—Å–ª–∏ —Ä–∞–Ω—å—à–µ ‚Äú–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ‚Äù ‚Äî —ç—Ç–æ –±—ã–ª type=open. –°–µ–π—á–∞—Å type=nav ‚úÖ</div>
      </div>
    </section>

    <footer class="foot">
      <div class="foot-left">‚Äî BCO üòà</div>
      <div class="foot-right"></div>
    </footer>
  </main>

  <!-- NAV: 5 –≤–∫–ª–∞–¥–æ–∫, Game –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ "Zombies" -->
  <nav class="bottombar bottom-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <button class="nav-btn active" data-tab="home" type="button" aria-selected="true">
      <span class="nav-ico">‚≠ê</span><span class="nav-txt">–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    <button class="nav-btn" data-tab="coach" type="button" aria-selected="false">
      <span class="nav-ico">üéØ</span><span class="nav-txt">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
    </button>
    <button class="nav-btn" data-tab="vod" type="button" aria-selected="false">
      <span class="nav-ico">üé¨</span><span class="nav-txt">VOD</span>
    </button>
    <button class="nav-btn" data-tab="settings" type="button" aria-selected="false">
      <span class="nav-ico">‚öôÔ∏è</span><span class="nav-txt">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
    </button>
    <button class="nav-btn" data-tab="game" type="button" aria-selected="false">
      <span class="nav-ico">üïπÔ∏è</span><span class="nav-txt">Game</span>
    </button>
  </nav>

  <div class="toast" id="toast">OK</div>

  <!-- mount –ø–æ–¥ fullscreen overlay/–∫–∞–Ω–≤–∞—Å -->
  <div id="zOverlayMount" aria-hidden="true"></div>

  <!-- BOOT LOADER (order preserved; async=false) -->
  <script>
    (function () {
      var build = window.__BCO_BUILD__ || String(Date.now());
      var health = document.getElementById("jsHealth");
      var buildTag = document.getElementById("buildTag");

      function setHealth(msg) {
        if (health) health.textContent = msg;
      }
      function setBuildTag() {
        if (buildTag) buildTag.textContent = "build: " + build;
      }

      function load(src) {
        return new Promise(function (resolve, reject) {
          var s = document.createElement("script");
          s.src = src + "?build=" + encodeURIComponent(build);
          s.async = false;
          s.onload = function () { resolve(true); };
          s.onerror = function () { reject(new Error("Failed: " + src)); };
          document.body.appendChild(s);
        });
      }

      function loadOptional(src) {
        return new Promise(function (resolve) {
          var s = document.createElement("script");
          s.src = src + "?build=" + encodeURIComponent(build);
          s.async = false;
          s.onload = function () { resolve(true); };
          s.onerror = function () { resolve(false); };
          document.body.appendChild(s);
        });
      }

      setBuildTag();
      setHealth("js: boot‚Ä¶");

      // ‚úÖ –≤–∞–∂–Ω–æ–µ: zombies.js –ø–µ—Ä–≤—ã–º (–±–∞–∑–∞/–Ω–µ–π–º—Å–ø–µ–π—Å/–º–æ–¥—É–ª—å–Ω–∞—è —à–∏–Ω–∞). –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –±—É–¥–µ—Ç BOOT ERROR –∏ —Ç—ã —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—à—å.
      load("/webapp/zombies.js")
        .then(function () { return loadOptional("/webapp/zombies.assets.js"); })
        .then(function (ok) { if (!ok) console.warn("[BOOT] zombies.assets.js not loaded (optional)"); return loadOptional("/webapp/zombies.perks.js"); })
        .then(function (ok) { if (!ok) console.warn("[BOOT] zombies.perks.js not loaded (optional)"); return loadOptional("/webapp/zombies.maps.js"); })
        .then(function (ok) { if (!ok) console.warn("[BOOT] zombies.maps.js not loaded (optional)"); return loadOptional("/webapp/zombies.collisions.js"); })
        .then(function (ok) { if (!ok) console.warn("[BOOT] zombies.collisions.js not loaded (optional)"); return loadOptional("/webapp/zombies.bosses.js"); })
        .then(function (ok) { if (!ok) console.warn("[BOOT] zombies.bosses.js not loaded (optional)"); return load("/webapp/zombies.core.js"); })
        .then(function () { return load("/webapp/zombies.render.js"); })
        .then(function () { return loadOptional("/webapp/zombies.world.js"); })
        .then(function () { return load("/webapp/zombies.game.js"); })
        .then(function () { return load("/webapp/zombies.init.js"); })
        .then(function () { return load("/webapp/app.js"); })
        .then(function () { setHealth("js: OK (booted)"); })
        .catch(function (e) {
          console.error("BCO boot load error:", e);
          setHealth("js: BOOT ERROR (check console)");
        });
    })();
  </script>

  <script>
    (function () {
      var el = document.getElementById("jsHealth");
      if (!el) return;

      var tries = 0;
      var t = setInterval(function () {
        tries++;
        if (window.__BCO_JS_OK__ === true) {
          el.textContent = "js: OK";
          clearInterval(t);
          return;
        }
        if (tries >= 25) {
          el.textContent = "js: NOT LOADED (cache/route/path)";
          clearInterval(t);
        }
      }, 120);
    })();
  </script>
</body>
</html>
