# app/worlds/bf6/presets.py
from __future__ import annotations

from typing import Any, Dict


def _p(profile: Dict[str, Any], k: str, default: str) -> str:
    v = (profile.get(k) or "").strip()
    return v or default


def bf6_class_text(profile: Dict[str, Any]) -> str:
    platform = _p(profile, "platform", "PC")
    input_ = _p(profile, "input", "Controller")
    cls = _p(profile, "bf6_class", "Assault")

    # BF6 settings must be EN (as requested)
    head = f"ü™ñ BF6 Class Settings (EN)\nClass: {cls}\nPlatform: {platform}\nInput: {input_}\n"

    # ‚ÄúUltra‚Äù guidance per class (not cutting anything, but compact)
    if cls == "Assault":
        body = (
            "\nASSAULT ROLE: entry + first contact + space creation\n"
            "Loadout priorities:\n"
            "‚Ä¢ Primary: fast TTK AR / controllable recoil (mid-range)\n"
            "‚Ä¢ Secondary: quick swap (pistol/SMG)\n"
            "‚Ä¢ Gadget: self-sustain / anti-peek pressure\n"
            "Play rules:\n"
            "1) First shot advantage: pre-aim likely head height\n"
            "2) Trade system: never solo push without timing\n"
            "3) After down/kill: instant reposition 3‚Äì6 meters\n"
        )
    elif cls == "Recon":
        body = (
            "\nRECON ROLE: info + angles + pick potential\n"
            "Loadout priorities:\n"
            "‚Ä¢ Primary: DMR/Sniper (long) OR stable AR (mid)\n"
            "‚Ä¢ Gadget: spotting / denial / anti-flank\n"
            "Play rules:\n"
            "1) Hold power angles, don‚Äôt tunnel vision\n"
            "2) Every pick must convert to team move\n"
            "3) Rotate early, control sightlines\n"
        )
    elif cls == "Engineer":
        body = (
            "\nENGINEER ROLE: vehicles/utility + anchor\n"
            "Loadout priorities:\n"
            "‚Ä¢ Primary: versatile AR/LMG for sustained fire\n"
            "‚Ä¢ Gadget: anti-vehicle + area control\n"
            "Play rules:\n"
            "1) Deny vehicles BEFORE they farm your team\n"
            "2) Play near cover: long fights are your win\n"
            "3) Lock lanes, feed ammo/utility timing\n"
        )
    else:  # Medic
        body = (
            "\nMEDIC ROLE: sustain + tempo control\n"
            "Loadout priorities:\n"
            "‚Ä¢ Primary: stable AR/SMG depending on map density\n"
            "‚Ä¢ Gadget: revive speed / smoke / survival\n"
            "Play rules:\n"
            "1) Smoke = reset fights, not decoration\n"
            "2) Revive only if safe: clear angle first\n"
            "3) Stay alive > hero revive\n"
        )

    return head + body


def bf6_aim_sens_text(profile: Dict[str, Any]) -> str:
    platform = _p(profile, "platform", "PC")
    input_ = _p(profile, "input", "Controller")

    head = f"üéØ BF6 Aim/Sens (EN)\nPlatform: {platform}\nInput: {input_}\n"

    if input_ == "KBM":
        return head + (
            "\nKBM baseline:\n"
            "‚Ä¢ DPI: 800 (or 1600 if you prefer) ‚Äî keep consistent\n"
            "‚Ä¢ eDPI target: 240‚Äì360 for control (adjust by feel)\n"
            "‚Ä¢ ADS multiplier: 0.90‚Äì1.00 (keep micro stable)\n"
            "Drill (10‚Äì15 min):\n"
            "1) Smooth tracking (close) 3 min\n"
            "2) Micro-flick to head-height 5 min\n"
            "3) Strafe-shoot discipline 5 min\n"
        )

    return head + (
        "\nController baseline:\n"
        "‚Ä¢ Deadzone (L/R): as low as possible without drift\n"
        "‚Ä¢ Aim response curve: linear-ish for consistency\n"
        "‚Ä¢ ADS sens: slightly lower than hip for beam\n"
        "‚Ä¢ Acceleration: OFF/low (avoid over-aim)\n"
        "Drill (10‚Äì15 min):\n"
        "1) Recoil control 3 min\n"
        "2) Strafe tracking 5 min\n"
        "3) Peek-shoot timing 5 min\n"
    )


def bf6_controller_tuning_text(profile: Dict[str, Any]) -> str:
    return (
        "üéÆ BF6 Controller Tuning (EN)\n"
        "Core:\n"
        "‚Ä¢ Stick deadzones: lowest stable (no drift)\n"
        "‚Ä¢ Response curve: linear / dynamic (pick ONE, don‚Äôt swap daily)\n"
        "‚Ä¢ Aim accel: OFF/low\n"
        "‚Ä¢ ADS sens: reduce 5‚Äì15% vs hip\n"
        "Anti-bad habits:\n"
        "‚Ä¢ No panic-flicks. Track first, then micro-correct.\n"
        "‚Ä¢ Use cover timing: shoot 0.4‚Äì0.8s bursts.\n"
    )


def bf6_kbm_tuning_text(profile: Dict[str, Any]) -> str:
    return (
        "‚å®Ô∏è BF6 KBM Tuning (EN)\n"
        "Core:\n"
        "‚Ä¢ Keep DPI constant (800 recommended)\n"
        "‚Ä¢ Disable OS mouse accel\n"
        "‚Ä¢ Sens: choose a baseline and lock it 7 days\n"
        "‚Ä¢ ADS multiplier: 0.9‚Äì1.0\n"
        "Anti-bad habits:\n"
        "‚Ä¢ Stop over-flicking: aim with arm, micro with fingers\n"
        "‚Ä¢ Crosshair always at head height\n"
    )
