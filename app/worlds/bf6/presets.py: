# app/worlds/bf6/presets.py
from __future__ import annotations
from typing import Any, Dict


def _p(profile: Dict[str, Any], k: str, default: str) -> str:
    v = (profile.get(k) or "").strip()
    return v or default


def bf6_class_text(profile: Dict[str, Any]) -> str:
    platform = _p(profile, "platform", "PC")
    input_ = _p(profile, "input", "Controller")
    cls = _p(profile, "bf6_class", "Assault")

    head = f"ü™ñ BF6 Class Settings (EN)\nClass: {cls}\nPlatform: {platform}\nInput: {input_}\n"

    if cls == "Assault":
        body = (
            "\nASSAULT: entry + first contact\n"
            "NOW:\n‚Ä¢ Pre-aim head height\n‚Ä¢ Kill ‚Üí instant 3‚Äì6m reposition\n‚Ä¢ Trade timing, no solo push\n"
        )
    elif cls == "Recon":
        body = (
            "\nRECON: info + angles\n"
            "NOW:\n‚Ä¢ Hold power angles\n‚Ä¢ Every pick ‚Üí team move\n‚Ä¢ Rotate early, control sightlines\n"
        )
    elif cls == "Engineer":
        body = (
            "\nENGINEER: utility + anti-vehicle\n"
            "NOW:\n‚Ä¢ Deny vehicles early\n‚Ä¢ Long fights from cover\n‚Ä¢ Lock lanes, sustain fire\n"
        )
    else:
        body = (
            "\nMEDIC: sustain + tempo\n"
            "NOW:\n‚Ä¢ Smoke to reset fights\n‚Ä¢ Revive only after clearing angle\n‚Ä¢ Stay alive > hero revive\n"
        )

    return head + body


def bf6_aim_sens_text(profile: Dict[str, Any]) -> str:
    platform = _p(profile, "platform", "PC")
    input_ = _p(profile, "input", "Controller")
    head = f"üéØ BF6 Aim/Sens (EN)\nPlatform: {platform}\nInput: {input_}\n"

    if input_ == "KBM":
        return head + "\nKBM baseline:\n‚Ä¢ DPI 800\n‚Ä¢ lock sens 7 days\n‚Ä¢ ADS 0.9‚Äì1.0\n"
    return head + "\nController baseline:\n‚Ä¢ lowest deadzone no drift\n‚Ä¢ low accel\n‚Ä¢ ADS slightly lower than hip\n"


def bf6_controller_tuning_text(profile: Dict[str, Any]) -> str:
    return (
        "üéÆ BF6 Controller Tuning (EN)\n"
        "‚Ä¢ Deadzones: lowest stable\n"
        "‚Ä¢ Response curve: pick ONE\n"
        "‚Ä¢ Aim accel: OFF/low\n"
    )


def bf6_kbm_tuning_text(profile: Dict[str, Any]) -> str:
    return (
        "‚å®Ô∏è BF6 KBM Tuning (EN)\n"
        "‚Ä¢ Disable OS accel\n"
        "‚Ä¢ DPI constant\n"
        "‚Ä¢ Sens lock 7 days\n"
    )
